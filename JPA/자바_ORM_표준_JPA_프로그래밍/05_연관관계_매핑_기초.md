객체의 참조와 테이블의 외래 키를 매핑하는 것이 이 장의 목표다.



# 01. 단방향 연관관계

## 객체 연관관계 vs 테이블 연관관계 정리

* 객체는 참조로 연관관계를 맺는다. 참조를 사용하는 객체의 연관관계는 단방향이다.
* 테이블은 외래 키로 연관관계를 맺는다. 외래 키를 사용하는 테이블의 연관관계는 양방향이다.
* 객체를 양방향으로 참조하려면 단방향 연관관계를 2개 만들어야 한다.



## 객체 관계 매핑

``` java
@Entity
public class Member {
  @ManyToOne
  @JoinColumn(name="TEAM_ID")
  private Team team;
}
```



### @ManyToOne

@ManyToOne 어노테이션은 다대일 관계에서 사용한다.

| 속성         | 기능                                                        | 기본값                                                       |
| ------------ | ----------------------------------------------------------- | ------------------------------------------------------------ |
| optional     | false로 설정하면 연관된 엔티티가 항상 있어야 한다.          | true                                                         |
| fetch        | 글로벌 패치 전략을 설정한다.                                | @ManyToOne : FetchType.EAGER<br />@OneToMany : FetchType.LAZY |
| cascade      | 영속성 전이 기능을 사용한다                                 |                                                              |
| targetEntity | 연관된 엔티티의 타입 정보를 설정한다. 거의 사용하지 않는다. |                                                              |



### @JoinColumn

| 속성                                                         | 기능                                                         | 기본값                                        |
| ------------------------------------------------------------ | ------------------------------------------------------------ | --------------------------------------------- |
| name                                                         | 매핑할 외래 키 이름                                          | 필드명 + _ + 참조하는 테이블의 기본 키 칼럼명 |
| referencedColumnName                                         | 외래 키가 참조하는 대상 테이블의 칼럼명                      | 참조하는 테이블의 기본 키 칼럼명              |
| foreignKey(DDL)                                              | 외래 키 제약 조건을 직접 지정할 수 있다.<br />이 속성은 테이블을 생성할 때만 사용한다. |                                               |
| unique<br />nullable<br />insertable<br />updatable<br />columnDefinition<br />table | @Column의 속성과 같다.                                       |                                               |



# 02. 연관관계 사용



# 03. 양방향 연관관계



# 04. 연관관계의 주인



# 05. 양방향 연관관계 저장



# 06. 양방향 연관관계의 주의점



# 07. 정리
