# 03. 생성자 주입을 선택해라

최근에는 스프링을 포함한 DI 프레임워크 대부분이 생성자 주입을 권장한다.



### 불변

* 대부분의 의존관계 주입은 한 번 일어나면 애플리에키션 종료 시점까지 의존관계를 변경할 일이 없다. 오히려 변경하면 안된다.
* 수정자 주입을 사용하면 set 메서드를 public으로 열어두어야 한다.
* 생성자 주입을 사용하면 객체를 생성할 때 딱 한 번만 호출되므로 이후에 호출되는 일이 없다.



### 누락

아래 상황을 보자.

``` java
@Test
void createOrder() {
    OrderServiceImpl orderService = new OrderServiceImpl();
    orderService.createOrder(1L, "itemA", 10000);
}
```

수정자 주입 같은 경우, 이는 실행이 되지만 NullPointException이 발생한다.

하지만 생성자 주입은 생성할 시점부터 컴파일 오류가 발생한다.

또한 IDE에서 어떤 값을 필수로 주입해야 하는지 알 수 있다.



### final 키워드

생성자 주입을 사용하면 필드에 final 키워드를 사용 할 수 있다.

그래서 생성자에서 혹시라도 값이 설정되지 않는 오류를 컴파일 시점에서 막아준다.





### 정리

* 생성자 주입 방식을 선택해야 하는 이유는 여러가지가 있겠지만 프레임워크에 의존하지 않고 순수한 자바 언어의 특징을 잘 살리는 방법이기도 하다.
* 기본으로 생성자 주입을 사용하고 필수 값이 아닌 경우에는 수정자 주입 방식으로 옵션으로 부여한다.
